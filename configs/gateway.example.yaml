# DaTaK Gateway Configuration
# Copy this to gateway.yaml and adjust for your environment

gateway:
  name: "DaTaK-Gateway-01"
  log_level: "DEBUG" # DEBUG, INFO, WARNING, ERROR
  data_dir: "/opt/datak/data"

# SQLite for configuration and audit
database:
  url: "sqlite+aiosqlite:///data/gateway.db"
  echo: false # Set true for SQL debug logging

# InfluxDB for time-series data
influxdb:
  url: "http://localhost:8086"
  token: "datak-dev-token"
  org: "datak"
  bucket: "sensors"
  retention_days: 30

# MQTT Broker (local Mosquitto)
mqtt:
  broker: "localhost"
  port: 1883
  client_id: "datak-gateway"
  # username: ""
  # password: ""
  topics:
    - "sensors/#"
    - "esp32/#"

# Digital Twin / Cloud connection
digital_twin:
  enabled: false
  endpoint: "https://your-twin.example.com/api/v1/data"
  api_key: "your-api-key-here"
  timeout_seconds: 10
  retry_attempts: 3

# CSV Report Generation
reports:
  enabled: true
  output_dir: "data/exports"
  intervals:
    - "1min"
    - "5min"
    - "1hour"
  retention:
    compress_after_days: 7
    delete_after_days: 365

# Security
security:
  jwt_secret: "CHANGE-THIS-IN-PRODUCTION-use-openssl-rand-base64-32"
  jwt_algorithm: "HS256"
  token_expire_minutes: 1440 # 24 hours

# API Server
api:
  host: "0.0.0.0"
  port: 8000
  workers: 1 # Keep 1 for hardware access consistency
  cors_origins:
    - "http://localhost:5173"
    - "http://localhost:3000"
    - "http://100.95.129.22:5173"

# Metrics (Prometheus)
metrics:
  enabled: true
  port: 9100
